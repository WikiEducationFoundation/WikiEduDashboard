.container
  .profile_container
    #profile
      #disclaimer
        .module
          .module__data
            = t("users.disclaimer")
      = form_for(@user_profile, url: {action: "edit", :username => @user.username}, html: { class: 'rails_editable' }) do
        - if current_user == @user
          #profile_right
            #edit_profile
              .controls
                %button.button.rails_editable-edit
                  Edit Profile

        #profile_left
          #user_name
            %p
              User: #{@user.username}
            .rails_editable-field
              #user_bio
                %p.rails_editable-content
                  = preserve @user&.user_profile&.bio
                = text_area(:user_profile, :bio, class: 'rails_editable-input')

          #user_id
            - if current_user == @user || current_user&.admin?
              #icon
                &#x2709;
              %p
                #{@user.email}

    #userprofile_navbar
      - if @user.course_instructor? || @user.course_student?
        = render 'users/profile_nav'

    #profile_details
      - if @user.course_instructor? || @user.course_student?
        #statistics
          %h3
            = t("users.contribution_statistics")
          %br/
          #inner_statistics
            - if @user.course_instructor?
              = render 'users/instructor_cumulative_stats', presenter: @courses_presenter
              %hr
            -elsif @user.course_student?
              = render 'users/student_cumulative_stats', presenter: @individual_stats_presenter
              %hr

      #course-details
        - if @courses_users.present?
          %h3
            = t("courses.course_details")
          %br/
          - @courses_users.each do |c|
            %a.course{:href => "/courses/#{c.course.slug}"}
              %span.button.border
                = t("courses.view_page")
              .course-title
                = c.course.title
              .course-details
                .col
                  .course-details_title
                    = t("courses.school")
                  .course-details_value
                    = c.course.school
                .col
                  .course-details_title
                    = t("courses.term")
                  .course-details_value
                    = c.course.term
                .col
                  .course-details_title
                    = t("courses.students_count")
                  .course-details_value
                    = c.course.user_count
                .col
                  .course-details_title
                    = t("courses.user_role")
                  .course-details_value
                    = course_role_name(c.role)
        -else
          %h4
            #{@user.username}
            = t("courses.nocourse")
